### 索引与算法

#### InnoDB存储引擎索引概述

`InnoDB` 存储引擎支持以下几种常见的索引

* B+树索引
* 全文索引
* 哈希索引

#### B+树索引

B+树索引并不能找到一个给定键值的具体行，B+树索引能找到的只是

被查找数据所在的页。然后数据库通过把页读入到内存，再在内存中进行查找，

最后得到要查找的数据。

B+树总是会保持平衡。但是为了保持平衡对于新插入的键值可能需要做大量的

拆分页（`split`）操作。因为B+树结构主要用于磁盘，页的拆分意味着磁盘操作，

所以应该在可能的情况下尽量减少页的拆分操作。因此，B+树同样提供了类似于

平衡二叉树的旋转（`Rotation`）功能。

旋转发生在`Leaf Page`已经满，但是其左右兄弟节点没有满的情况下。这是B+树

并不会急于做拆分页的操作，而是将记录移到所在页的兄弟节点上。通常情况下，

左兄弟会被首先检查用来做旋转操作。

B+索引在数据库中有一个特点是高扇出性，因此在数据库中，B+树的高度一般

都在2~4层，也就是说查找某一键值的行记录时最多只需要2到4次IO。

当前机械磁盘每秒至少可以做100次IO，2~4次的IO意味着查询时间只需0.02~0.04秒。



#### 哈希索引

`InnoDB`存储引擎支持的哈希索引是自适应的，`InnoDB`存储引擎

会根据表的使用情况自动为表生成哈希索引，不能人为干预是否生成。

